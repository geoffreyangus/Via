<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Via 2.0</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Jquery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

        <!-- Cytoscape -->
        <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>

        <!-- Other iVis-at-Bilkent libraries for Cytoscape, load before any extensions just to be safe -->
        <script src="https://unpkg.com/layout-base/layout-base.js"></script>
        <script src="https://unpkg.com/avsdf-base/avsdf-base.js"></script>
        <script src="https://unpkg.com/cose-base/cose-base.js"></script>
        <script src="https://unpkg.com/cytoscape-graphml/cytoscape-graphml.js"></script>
        <script src="https://raw.githack.com/iVis-at-Bilkent/cytoscape.js-layvo/unstable/cytoscape-layvo.js"></script>

        <!-- Context Menus for Cytoscape -->
        <script src="scripts/extensions/cytoscape-context-menus.js"></script>
        <link href="styles/cytoscape-context-menus.css" rel="stylesheet" type="text/css" />

        <!-- CiSE Layout for Cytoscape -->
        <script src="scripts/extensions/cytoscape-cise.js"></script>
        
        <!-- Grid Guide for Cytoscape -->
        <script src="scripts/extensions/cytoscape-grid-guide.js"></script>

        <!-- Navigator for Cytoscape -->
        <script src="scripts/extensions/cytoscape-navigator.js"></script>
        <link rel="stylesheet" type="text/css" href="styles/cytoscape-navigator.css" />

        <!-- Tippy / Popper tooltip for Cytoscape -->
        <script src="https://unpkg.com/popper.js@1.14.7/dist/umd/popper.js"></script>
        <script src="scripts/extensions/cytoscape-popper.js"></script>
        <script src="https://unpkg.com/tippy.js@4.0.1/umd/index.all.min.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/tippy.js@4.0.1/index.css" />

        <!-- Supernode expand / collapse extension for Cytoscape -->
        <script src="scripts/extensions/cytoscape-expand-collapse.js"></script>

        <!-- font awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

        <!-- Random Color Generator -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/randomcolor/0.5.4/randomColor.min.js"></script>

        <!-- bootstrap, note: using both css versions simultaneously
             bootstrap version > 3.3.7 does not have tagsinput support,
             some bootstrap version > 4.0.0 does not have modal window support,
             bootstrap version 3 does not have d-flex and still uses the row-col style grid layouts -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">

        <!-- bootstrap tags input -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tagsinput/0.8.0/bootstrap-tagsinput.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tagsinput/0.8.0/bootstrap-tagsinput.css">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tagsinput/0.8.0/bootstrap-tagsinput.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.10.4/typeahead.bundle.min.js"></script>

        <!-- Copy to clipboard -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.5.3/clipboard.min.js"></script>
        
        <!-- custom stylesheets -->
        <link rel="stylesheet" type="text/css" href="styles/main.css">
        <link rel="stylesheet" type="text/css" href="styles/sidebar.css">

        <!-- custom javascript -->
        <script src="scripts/pathways.js"></script>
        <script src="scripts/compound-nodes.js"></script>
        <script src="scripts/clusters.js"></script>
        <script src="scripts/tooltip.js"></script>
        <script src="scripts/layouts.js"></script>
        <script src="scripts/nodes.js"></script>
        <script src="scripts/edges.js"></script>
        <script src="scripts/graph-display.js"></script>
        <script src="scripts/sidebar-filters.js"></script>
        <script src="scripts/context-menu.js"></script>
        <script src="scripts/calculate.js"></script>
        <script src="scripts/pathDisplays.js"></script>        

    </head>
    <body>
        
        <div class="d-flex" id="wrapper" style="max-width:100%; max-height:100vh">
      
          <!-- Sidebar -->
          <div class="bg-light border-right" id="sidebar-wrapper">
            <small class="sidebar-heading">MAIN MENU</small>
            <div class="list-group">
              
              <!-- Sidebar Option: Layout-->
              <a href="#submenu-layout" data-toggle="collapse" aria-expanded="false" data-target="#submenu-layout" class="list-group-item list-group-item-action bg-light flex-column align-items-start">
                <div class="d-flex w-100 justify-content-start align-items-center">
                    <i class="fa fa-sitemap fa-fw mr-3"></i>
                    <span class="menu-collapsed">Layouts</span>
                    <span class="submenu-icon ml-auto"></span>
                </div>
              </a>
      
              <!-- Submenu: Layout-->
              <div id='submenu-layout' class="collapse sidebar-submenu">
                  <div id='form-layout' class="form-group">
                    <button onclick="resetView()" id="reset-view-btn" class="btn btn-success btn-block">Reset View</button>
                  </div>
                  <hr>
                  <div id='form-layout' class="form-group">
                      <label for="layout-selector">Select Layout</label>
                      <select class="form-control" id="layout-selector">
                          <option value="clusters">clusters</option>
                          <option value="cise">cise (max 1000 nodes)</option>
                          <option value="grid">grid</option>
                          <option value="circle">circle</option>
                          <option value="concentric">concentric</option>
                          <option value="cose">cose</option>   
                          <option value="breadthfirst">breadthfirst</option>    
                          <option value="random">random</option>
                      </select>
                  </div>
                  <button onclick="changeLayout()" id="run-layout-btn" class="btn btn-success btn-block">Run</button>
              </div>
      

              <!-- Sidebar Option: Filter-->
              <a href="#submenu-filter" data-toggle="collapse" aria-expanded="false" class="list-group-item list-group-item-action bg-light flex-column align-items-start">
                <div class="d-flex w-100 justify-content-start align-items-center">
                    <span class="fa fa-filter fa-fw mr-3"></span> 
                    <span class="menu-collapsed">Filters</span>
                    <span class="submenu-icon ml-auto"></span>
                </div>
              </a>
      
              <!-- Submenu: Filter-->
              <div id='submenu-filter' class="collapse sidebar-submenu">

                <!-- Department filter -->
                <div class="form-group">
                    <div id="department-filter-div">
                        <label style="display:block;">Filter Departments:</label>
                        <select multiple type="text" data-role="tagsinput" class="form-control" style="display:block; width:100%" id="department-names-field">
                        </select>
                    </div>
                </div>

                <button onclick="filterDepartments()" class="btn btn-success btn-block">Filter Departments</button>
                <button onclick="filterAllDepartments()" class="btn btn-success btn-block">Filter All Departments</button>                
                <hr>

                <!-- Node probability filter -->
                <div id="node-prob-filter-div" style="margin-bottom: 10px;">
                        <label style="display:block;">Show Nodes Probabilities in Range:</label>
                        <span>[</span>
                        <input id="node-prob-input-lowerbound" type="number" min=0 max=1 step="0.01" placeholder="0" value=0>
                        <span>,</span>
                        <input id="node-prob-input-upperbound" type="number" min=0 max=1 step="0.01" placeholder="1" value=1>
                        <span>]</span>
                </div>

                <button onclick="filterNodeProbability()" class="btn btn-success btn-block">Filter Nodes</button>

                <hr>

                <!-- Edge probability filter -->
                <div id="edge-prob-filter-div" style="margin-bottom: 10px;">
                    <label style="display:block;">Show Edges Weights in Range:</label>
                    <span>[</span>
                    <input id="edge-weight-input-lowerbound" type="number" min=0 max=1 step="0.01" placeholder="0" value=0>
                    <span>,</span>
                    <input id="edge-weight-input-upperbound" type="number" min=0 max=1 step="0.01" placeholder="1" value=1>
                    <span>]</span>
                </div>

                <button onclick="filterEdgeWeight()" class="btn btn-success btn-block">Filter Edges</button>

                <hr>

                <!-- Andreas: Pixel width -->
                <div id="edge-thickness-div" style="margin-bottom: 10px;">
                    <label style="display:block;">Set cross-department link width:</label>
                    <input id="edge-width"
                           type="number"
                           min=1 max=20 step="1"
                           placeholder="1" value=2
                           onclick="setEdgePixelWidth()"
                           onkeydown = "if (event.keyCode == 13)
                                        setEdgePixelWidth()" 
                           >
                </div>

                <hr>
                <!-- End Andreas -->

                <button onclick="resetAllFilters()" class="btn btn-success btn-block">Reset All</button>
              </div>
              
      
              <!-- Sidebar Option: Calculate-->
              <a href="#submenu-calculate" data-toggle="collapse" aria-expanded="false" class="list-group-item list-group-item-action bg-light flex-column align-items-start">
                <div class="d-flex w-100 justify-content-start align-items-center">
                    <i class="fa fa-calculator fa-fw mr-3"></i>
                    <span class="menu-collapsed">Calculate</span>
                    <span class="submenu-icon ml-auto"></span>
                </div>
              </a>
      
              <!-- Submenu: Calculate-->
              <div id='submenu-calculate' class="collapse sidebar-submenu">
                    <div id='form-layout' class="form-group">
                      <label for="degree-fxn-selector">Select Degree Type:</label>
                      <select class="form-control" id="degree-fxn-selector">
                          <option value="degree">Degree</option>
                          <option value="in-degree">In-degree</option>
                          <option value="out-degree">Out-degree</option>
                      </select>
                    </div>
                    <button onclick="computeDegreeFunction()" class="btn btn-primary btn-block" data-toggle="modal" data-target="#myModal">Compute Degree</button>
                    <div id='form-layout-shortest-paths' class="form-group">
                      <label style="display:block;">Likely Future Courses:</label>
                      <input id="from-course" type="text" size="17"
                             placeholder="Enter course name" value=""
                             onkeydown = "if (event.keyCode == 13)
                                          courseFutures()" 
                             >
                      <span>out</span>
                      <input id="distance" type="number" min="1" max="20" size="3" placeholder="3" value="3">
                      <span>courses</span>
                    </div>
                    <button onclick="courseFutures()" Class="btn btn-primary btn-block">Show Common Path</button>
              </div> <!-- submenu shortest path -->
            </div><!--/.list-group-->
          </div><!-- /#sidebar-wrapper -->
      
          <!-- Page Content -->
          <div id="page-content-wrapper">
            <div class="container-fluid">
              <div id="cy">
                <h5 id="graph-title">Via Course Pathways Visualizer</h5>
              </div>
            </div>
          </div><!-- /#page-content-wrapper -->

        </div><!-- /#wrapper -->

        <!-- Modal -->
        <div class="modal fade" id="myModal" role="dialog">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-body">
                <h4 class="modal-title" id="modal-title"></h4>
                <hr>
                <pre id="modal-log"></pre>
              </div>
              <div class="modal-footer">
                  <span class="btn btn-default" data-clipboard-target="#modal-log">
                      <img src="images/clippy.svg" width="13" alt="Copy to clipboard">
                  </span>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
            
          </div>
        </div>
            
      </body>
</html>
